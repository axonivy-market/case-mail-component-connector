<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite"
	xmlns:ic="http://ivyteam.ch/jsf/component"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">
<cc:interface componentType="IvyComponent">
	<cc:attribute name="pdfViewerWidth" default="100%" />
	<cc:attribute name="pdfViewerHeight" default="auto" />
	<cc:attribute name="imageWidth" default="100%" />
	<cc:attribute name="imageHeight" default="auto" />
	<cc:attribute name="pdfViewerPanelGroupStyle" default="" />
</cc:interface>

<cc:implementation>

	<h:outputStylesheet name="documentViewer.css" library="ivy-dialog" />
	<h:outputScript name="documentViewer.js" library="ivy-dialog" />

	<h:outputText value="#{documentViewerBean.currentFile.name}"
		styleClass="ellipsisText" />
	<h:panelGroup rendered="#{documentViewerBean.canRenderDocument()}"
		styleClass="#{cc.attrs.pdfViewerPanelGroupStyle}">
		<pe:documentViewer id="documentViewerComponent"
			value="#{documentViewerBean.currentFileRef}"
			title="DocumentViewerComponentTitle"
			width="#{cc.attrs.pdfViewerWidth}"
			height="#{cc.attrs.pdfViewerHeight}" zoom="page-width">
		</pe:documentViewer>
		<script>
			/* Hide "#openFile" button in the pe:documentViewer component */
			$(document).ready(function() {
				pdfViewerHideButton('openFile', 'DocumentViewerComponentTitle');
				pdfViewerHideButton('viewBookmark', 'DocumentViewerComponentTitle');
	        });
		</script>
	</h:panelGroup>
	<h:panelGroup rendered="#{documentViewerBean.canRenderImage()}">
		<p:graphicImage id="imageThumbnail"
			value="#{documentViewerBean.currentFileRef}"
			onclick="openImageDetail()" styleClass="cursor-zoom-in"
			width="#{cc.attrs.imageWidth}" height="#{cc.attrs.imageHeight}" />
		<p:remoteCommand name="openImageDetail" update="galleria"
			oncomplete="PF('galleria').show(); applyMoveEvent('galleria')" />
		<p:galleria id="galleria" widgetVar="galleria"
			value="#{documentViewerBean.currentFileList}" var="image"
			numVisible="1" fullScreen="true">
			<p:graphicImage id="galleriaImage" value="#{ivy.html.fileref(image)}"
				styleClass="disable-pointer-events disable-user-select">
			</p:graphicImage>
			<pe:imageRotateAndResize id="rotateAndResize" for="galleriaImage"
				widgetVar="rotateAndResizeWidget" />
			<f:facet name="footer">
				<p:toolbar id="resizeToolbar" styleClass="galleria-toolbar">
					<f:facet name="left">
						<p:commandButton id="increaseSize" icon="pi pi-search-plus"
							process="@none" update="@none"
							onclick="PF('rotateAndResizeWidget').scale(1.1);return false;"
							styleClass="mr-2" />
						<p:commandButton id="decreaseSize" icon="pi pi-search-minus"
							process="@none" update="@none"
							onclick="PF('rotateAndResizeWidget').scale(0.9);return false;"
							styleClass="ml-2" />
					</f:facet>
				</p:toolbar>
			</f:facet>
		</p:galleria>
	</h:panelGroup>
	<h:panelGroup rendered="#{documentViewerBean.previewNotAvailable}">
		<h:outputText value="#{documentViewerBean.currentFile.name}"
			styleClass="ellipsisText" />
		<p:staticMessage summary="INFO"
			detail="#{ivy.cms.co('/Document/previewNotAvailable')}"/>
	</h:panelGroup>
</cc:implementation>

</html>
